<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
 <head><title>Todo Stack</title><meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description"
   content="Build a simple todo app with more complex state management"/>
  <link rel="stylesheet" href="/styles.css"/>
 </head>
 <body>
             
  <div class="nav"><h1 class="title"><a href="/">jsoo-mithril</a></h1>
   <ul>
    <li><a href="/tutorial">Tutorial</a>
     <ul><li><a href="/tutorial/hello-world">Hello World</a></li>
      <li>
       <a href="/tutorial/counter-closure-component">
        Counter closure component
       </a>
      </li>
      <li>
       <a href="/tutorial/request-data-from-the-internet">
        Request data from the internet
       </a>
      </li><li><a href="/tutorial/todo-stack">Todo Stack</a></li>
      <li><a href="/tutorial/routing">Routing</a></li>
      <li><a href="/tutorial/markdown-editor">Markdown Editor</a></li>
     </ul>
    </li>
   </ul>
  </div>
  <div class="content">
   <div class="meta"><h2>Todo Stack</h2>
    <p> By Patrick Ferris on 2021-01-20 18:12:00 +00:00</p>
   </div>
   <p>The Todo Stack is a very simple todo list. There's nothing really new here that hasn't already been covered. You can <a href="./example">play around with the app</a> all you want. Here is the entire source code.</p>
<!-- $MDX file=./example/index.ml -->
<pre><code><span class="ocaml-keyword">open</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">Mithril</span><span class="ocaml-source">
</span><span class="ocaml-keyword">open</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">Brr</span><span class="ocaml-source">
</span><span class="ocaml-source">
</span><span class="ocaml-keyword">module</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">Date</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">=</span><span class="ocaml-source"> </span><span class="ocaml-keyword">struct</span><span class="ocaml-source">
</span><span class="ocaml-source">  </span><span class="ocaml-keyword">type</span><span class="ocaml-source"> </span><span class="ocaml-source">t</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">=</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">Jv</span><span class="ocaml-keyword">.</span><span class="ocaml-source">t</span><span class="ocaml-source">
</span><span class="ocaml-source">
</span><span class="ocaml-source">  </span><span class="ocaml-source">let </span><span class="ocaml-entity-name">date</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">=</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">Jv</span><span class="ocaml-keyword">.</span><span class="ocaml-source">get</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">Jv</span><span class="ocaml-keyword">.</span><span class="ocaml-source">global</span><span class="ocaml-source"> </span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-string-quoted">Date</span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-source">
</span><span class="ocaml-source">
</span><span class="ocaml-source">  </span><span class="ocaml-source">let </span><span class="ocaml-entity-name">now</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">()</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">=</span><span class="ocaml-source">
</span><span class="ocaml-source">    </span><span class="ocaml-source">let </span><span class="ocaml-entity-name">d</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">=</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">Jv</span><span class="ocaml-keyword">.</span><span class="ocaml-source">new'</span><span class="ocaml-source"> </span><span class="ocaml-source">date</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">[||]</span><span class="ocaml-source"> </span><span class="ocaml-keyword">in</span><span class="ocaml-source">
</span><span class="ocaml-source">    </span><span class="ocaml-source">let </span><span class="ocaml-entity-name">date</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">=</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">Jv</span><span class="ocaml-keyword">.</span><span class="ocaml-source">call</span><span class="ocaml-source"> </span><span class="ocaml-source">d</span><span class="ocaml-source"> </span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-string-quoted">toLocaleDateString</span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">[||]</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">|&gt;</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">Jv</span><span class="ocaml-keyword">.</span><span class="ocaml-source">to_string</span><span class="ocaml-source"> </span><span class="ocaml-keyword">in</span><span class="ocaml-source">
</span><span class="ocaml-source">    </span><span class="ocaml-source">let </span><span class="ocaml-entity-name">time</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">=</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">Jv</span><span class="ocaml-keyword">.</span><span class="ocaml-source">call</span><span class="ocaml-source"> </span><span class="ocaml-source">d</span><span class="ocaml-source"> </span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-string-quoted">toLocaleTimeString</span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">[||]</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">|&gt;</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">Jv</span><span class="ocaml-keyword">.</span><span class="ocaml-source">to_string</span><span class="ocaml-source"> </span><span class="ocaml-keyword">in</span><span class="ocaml-source">
</span><span class="ocaml-source">    </span><span class="ocaml-source">date</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">^</span><span class="ocaml-source"> </span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-string-quoted"> </span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">^</span><span class="ocaml-source"> </span><span class="ocaml-source">time</span><span class="ocaml-source">
</span><span class="ocaml-keyword">end</span><span class="ocaml-source">
</span><span class="ocaml-source">
</span><span class="ocaml-comment">(*</span><span class="ocaml-comment"> A nice, typed OCaml representation of a todo item </span><span class="ocaml-comment">*)</span><span class="ocaml-source">
</span><span class="ocaml-keyword">module</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">Todo</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">=</span><span class="ocaml-source"> </span><span class="ocaml-keyword">struct</span><span class="ocaml-source">
</span><span class="ocaml-source">  </span><span class="ocaml-keyword">type</span><span class="ocaml-source"> </span><span class="ocaml-source">t</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">=</span><span class="ocaml-source"> { </span><span class="ocaml-source">text</span><span class="ocaml-source"> </span><span class="ocaml-keyword">:</span><span class="ocaml-source"> </span><span class="ocaml-support">string</span><span class="ocaml-keyword">;</span><span class="ocaml-source"> </span><span class="ocaml-keyword">mutable</span><span class="ocaml-source"> </span><span class="ocaml-source">completed</span><span class="ocaml-source"> </span><span class="ocaml-keyword">:</span><span class="ocaml-source"> </span><span class="ocaml-support">bool</span><span class="ocaml-keyword">;</span><span class="ocaml-source"> </span><span class="ocaml-source">created</span><span class="ocaml-source"> </span><span class="ocaml-keyword">:</span><span class="ocaml-source"> </span><span class="ocaml-support">string</span><span class="ocaml-source"> }
</span><span class="ocaml-source">
</span><span class="ocaml-source">  </span><span class="ocaml-source">let </span><span class="ocaml-entity-name">v</span><span class="ocaml-source"> </span><span class="ocaml-source">text</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">=</span><span class="ocaml-source">
</span><span class="ocaml-source">    </span><span class="ocaml-constant-language">Brr</span><span class="ocaml-keyword">.</span><span class="ocaml-constant-language">Console</span><span class="ocaml-keyword">.</span><span class="ocaml-source">log</span><span class="ocaml-source"> </span><span class="ocaml-source">[</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">Date</span><span class="ocaml-keyword">.</span><span class="ocaml-source">now</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">()</span><span class="ocaml-source"> </span><span class="ocaml-source">]</span><span class="ocaml-keyword">;</span><span class="ocaml-source">
</span><span class="ocaml-source">    { </span><span class="ocaml-source">text</span><span class="ocaml-keyword">;</span><span class="ocaml-source"> </span><span class="ocaml-source">completed</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">=</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">false</span><span class="ocaml-keyword">;</span><span class="ocaml-source"> </span><span class="ocaml-source">created</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">=</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">Date</span><span class="ocaml-keyword">.</span><span class="ocaml-source">now</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">()</span><span class="ocaml-source"> }
</span><span class="ocaml-source">
</span><span class="ocaml-source">  </span><span class="ocaml-source">let </span><span class="ocaml-entity-name">toggle</span><span class="ocaml-source"> </span><span class="ocaml-source">t</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">=</span><span class="ocaml-source"> </span><span class="ocaml-source">t</span><span class="ocaml-keyword">.</span><span class="ocaml-source">completed</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">&lt;-</span><span class="ocaml-source"> </span><span class="ocaml-source">not</span><span class="ocaml-source"> </span><span class="ocaml-source">t</span><span class="ocaml-keyword">.</span><span class="ocaml-source">completed</span><span class="ocaml-source">
</span><span class="ocaml-source">
</span><span class="ocaml-source">  </span><span class="ocaml-source">let </span><span class="ocaml-entity-name">equal</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">=</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">Stdlib</span><span class="ocaml-keyword">.</span><span class="ocaml-source">(</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">=</span><span class="ocaml-source"> </span><span class="ocaml-source">)</span><span class="ocaml-source">
</span><span class="ocaml-keyword">end</span><span class="ocaml-source">
</span><span class="ocaml-source">
</span><span class="ocaml-source">let </span><span class="ocaml-entity-name">choose</span><span class="ocaml-source"> </span><span class="ocaml-source">a</span><span class="ocaml-source"> </span><span class="ocaml-source">b</span><span class="ocaml-source"> </span><span class="ocaml-source">c</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">=</span><span class="ocaml-source"> </span><span class="ocaml-keyword">if</span><span class="ocaml-source"> </span><span class="ocaml-source">a</span><span class="ocaml-source"> </span><span class="ocaml-keyword">then</span><span class="ocaml-source"> </span><span class="ocaml-source">b</span><span class="ocaml-source"> </span><span class="ocaml-keyword">else</span><span class="ocaml-source"> </span><span class="ocaml-source">c</span><span class="ocaml-source">
</span><span class="ocaml-source">
</span><span class="ocaml-keyword">let</span><span class="ocaml-source"> </span><span class="ocaml-source">todos</span><span class="ocaml-keyword">,</span><span class="ocaml-source"> </span><span class="ocaml-source">add_todo</span><span class="ocaml-keyword">,</span><span class="ocaml-source"> </span><span class="ocaml-source">remove_todo</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">=</span><span class="ocaml-source">
</span><span class="ocaml-source">  </span><span class="ocaml-source">let </span><span class="ocaml-entity-name">t</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">=</span><span class="ocaml-source"> </span><span class="ocaml-source">ref</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">[]</span><span class="ocaml-source"> </span><span class="ocaml-keyword">in</span><span class="ocaml-source">
</span><span class="ocaml-source">  </span><span class="ocaml-source">let </span><span class="ocaml-entity-name">add</span><span class="ocaml-source"> </span><span class="ocaml-source">e</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">=</span><span class="ocaml-source">
</span><span class="ocaml-source">    </span><span class="ocaml-keyword">let </span><span class="ocaml-keyword">open</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">Ev</span><span class="ocaml-source"> </span><span class="ocaml-keyword">in</span><span class="ocaml-source">
</span><span class="ocaml-source">    </span><span class="ocaml-source">let </span><span class="ocaml-entity-name">event</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">=</span><span class="ocaml-source"> </span><span class="ocaml-source">of_jv</span><span class="ocaml-source"> </span><span class="ocaml-source">e</span><span class="ocaml-source"> </span><span class="ocaml-keyword">in</span><span class="ocaml-source">
</span><span class="ocaml-source">    </span><span class="ocaml-source">let </span><span class="ocaml-entity-name">code</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">=</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">Keyboard</span><span class="ocaml-keyword">.</span><span class="ocaml-source">key</span><span class="ocaml-source"> </span><span class="ocaml-source">(</span><span class="ocaml-source">as_type</span><span class="ocaml-source"> </span><span class="ocaml-source">event</span><span class="ocaml-source">)</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">|&gt;</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">Jstr</span><span class="ocaml-keyword">.</span><span class="ocaml-source">to_string</span><span class="ocaml-source"> </span><span class="ocaml-keyword">in</span><span class="ocaml-source">
</span><span class="ocaml-source">    </span><span class="ocaml-source">let </span><span class="ocaml-entity-name">target</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">=</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">Ev</span><span class="ocaml-keyword">.</span><span class="ocaml-source">target</span><span class="ocaml-source"> </span><span class="ocaml-source">event</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">|&gt;</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">Ev</span><span class="ocaml-keyword">.</span><span class="ocaml-source">target_to_jv</span><span class="ocaml-source"> </span><span class="ocaml-keyword">in</span><span class="ocaml-source">
</span><span class="ocaml-source">    </span><span class="ocaml-keyword">match</span><span class="ocaml-source"> </span><span class="ocaml-source">(</span><span class="ocaml-source">code</span><span class="ocaml-keyword">,</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">Jv</span><span class="ocaml-keyword">.</span><span class="ocaml-source">find</span><span class="ocaml-source"> </span><span class="ocaml-source">target</span><span class="ocaml-source"> </span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-string-quoted">value</span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-source">)</span><span class="ocaml-source"> </span><span class="ocaml-keyword">with</span><span class="ocaml-source">
</span><span class="ocaml-source">    </span><span class="ocaml-keyword">|</span><span class="ocaml-source"> </span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-string-quoted">Enter</span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-keyword">,</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">Some</span><span class="ocaml-source"> </span><span class="ocaml-source">s</span><span class="ocaml-source"> </span><span class="ocaml-keyword">when</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">Jv</span><span class="ocaml-keyword">.</span><span class="ocaml-source">is_some</span><span class="ocaml-source"> </span><span class="ocaml-source">s</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">-&gt;</span><span class="ocaml-source">
</span><span class="ocaml-source">        </span><span class="ocaml-comment">(*</span><span class="ocaml-comment"> Update state </span><span class="ocaml-comment">*)</span><span class="ocaml-source">
</span><span class="ocaml-source">        </span><span class="ocaml-source">t</span><span class="ocaml-source"> </span><span class="ocaml-keyword">:</span><span class="ocaml-keyword-operator">=</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">Todo</span><span class="ocaml-keyword">.</span><span class="ocaml-source">v</span><span class="ocaml-source"> </span><span class="ocaml-source">(</span><span class="ocaml-constant-language">Jv</span><span class="ocaml-keyword">.</span><span class="ocaml-source">to_string</span><span class="ocaml-source"> </span><span class="ocaml-source">s</span><span class="ocaml-source">)</span><span class="ocaml-source"> </span><span class="ocaml-keyword">:</span><span class="ocaml-keyword">:</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">!</span><span class="ocaml-source">t</span><span class="ocaml-keyword">;</span><span class="ocaml-source">
</span><span class="ocaml-source">        </span><span class="ocaml-comment">(*</span><span class="ocaml-comment"> Set target's value to none </span><span class="ocaml-comment">*)</span><span class="ocaml-source">
</span><span class="ocaml-source">        </span><span class="ocaml-constant-language">Jv</span><span class="ocaml-keyword">.</span><span class="ocaml-source">set</span><span class="ocaml-source"> </span><span class="ocaml-source">target</span><span class="ocaml-source"> </span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-string-quoted">value</span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">Jv</span><span class="ocaml-keyword">.</span><span class="ocaml-source">null</span><span class="ocaml-source">
</span><span class="ocaml-source">    </span><span class="ocaml-keyword">|</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">_</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">-&gt;</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">()</span><span class="ocaml-source">
</span><span class="ocaml-source">  </span><span class="ocaml-keyword">in</span><span class="ocaml-source">
</span><span class="ocaml-source">  </span><span class="ocaml-source">let </span><span class="ocaml-entity-name">remove</span><span class="ocaml-source"> </span><span class="ocaml-source">todo</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">=</span><span class="ocaml-source">
</span><span class="ocaml-source">    </span><span class="ocaml-source">t</span><span class="ocaml-source"> </span><span class="ocaml-keyword">:</span><span class="ocaml-keyword-operator">=</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">List</span><span class="ocaml-keyword">.</span><span class="ocaml-source">filter</span><span class="ocaml-source"> </span><span class="ocaml-source">(</span><span class="ocaml-keyword">fun</span><span class="ocaml-source"> </span><span class="ocaml-source">todo'</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">-&gt;</span><span class="ocaml-source"> </span><span class="ocaml-source">not</span><span class="ocaml-source"> </span><span class="ocaml-source">(</span><span class="ocaml-constant-language">Todo</span><span class="ocaml-keyword">.</span><span class="ocaml-source">equal</span><span class="ocaml-source"> </span><span class="ocaml-source">todo</span><span class="ocaml-source"> </span><span class="ocaml-source">todo'</span><span class="ocaml-source">)</span><span class="ocaml-source">)</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">!</span><span class="ocaml-source">t</span><span class="ocaml-source">
</span><span class="ocaml-source">  </span><span class="ocaml-keyword">in</span><span class="ocaml-source">
</span><span class="ocaml-source">  </span><span class="ocaml-source">(</span><span class="ocaml-source">t</span><span class="ocaml-keyword">,</span><span class="ocaml-source"> </span><span class="ocaml-source">add</span><span class="ocaml-keyword">,</span><span class="ocaml-source"> </span><span class="ocaml-source">remove</span><span class="ocaml-source">)</span><span class="ocaml-source">
</span><span class="ocaml-source">
</span><span class="ocaml-source">let </span><span class="ocaml-entity-name">todos</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">=</span><span class="ocaml-source">
</span><span class="ocaml-source">  </span><span class="ocaml-source">let </span><span class="ocaml-entity-name">key</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">=</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">Attr</span><span class="ocaml-keyword">.</span><span class="ocaml-source">(</span><span class="ocaml-source">v</span><span class="ocaml-source"> </span><span class="ocaml-source">[|</span><span class="ocaml-source"> </span><span class="ocaml-source">attr</span><span class="ocaml-source"> </span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-string-quoted">onkeypress</span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-source"> </span><span class="ocaml-source">(</span><span class="ocaml-constant-language">Jv</span><span class="ocaml-keyword">.</span><span class="ocaml-source">repr</span><span class="ocaml-source"> </span><span class="ocaml-source">add_todo</span><span class="ocaml-source">)</span><span class="ocaml-source"> </span><span class="ocaml-source">|]</span><span class="ocaml-source">)</span><span class="ocaml-source"> </span><span class="ocaml-keyword">in</span><span class="ocaml-source">
</span><span class="ocaml-source">  </span><span class="ocaml-source">let </span><span class="ocaml-entity-name">todo</span><span class="ocaml-source"> </span><span class="ocaml-source">t</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">=</span><span class="ocaml-source">
</span><span class="ocaml-source">    </span><span class="ocaml-source">let </span><span class="ocaml-entity-name">remove</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">=</span><span class="ocaml-source">
</span><span class="ocaml-source">      </span><span class="ocaml-constant-language">Attr</span><span class="ocaml-keyword">.</span><span class="ocaml-source">(</span><span class="ocaml-source">v</span><span class="ocaml-source"> </span><span class="ocaml-source">[|</span><span class="ocaml-source"> </span><span class="ocaml-source">attr</span><span class="ocaml-source"> </span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-string-quoted">onclick</span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-source"> </span><span class="ocaml-source">(</span><span class="ocaml-constant-language">Jv</span><span class="ocaml-keyword">.</span><span class="ocaml-source">repr</span><span class="ocaml-source"> </span><span class="ocaml-source">(</span><span class="ocaml-keyword">fun</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">()</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">-&gt;</span><span class="ocaml-source"> </span><span class="ocaml-source">remove_todo</span><span class="ocaml-source"> </span><span class="ocaml-source">t</span><span class="ocaml-source">)</span><span class="ocaml-source">)</span><span class="ocaml-source"> </span><span class="ocaml-source">|]</span><span class="ocaml-source">)</span><span class="ocaml-source">
</span><span class="ocaml-source">    </span><span class="ocaml-keyword">in</span><span class="ocaml-source">
</span><span class="ocaml-source">    </span><span class="ocaml-source">let </span><span class="ocaml-entity-name">toggle</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">=</span><span class="ocaml-source">
</span><span class="ocaml-source">      </span><span class="ocaml-constant-language">Attr</span><span class="ocaml-keyword">.</span><span class="ocaml-source">(</span><span class="ocaml-source">v</span><span class="ocaml-source"> </span><span class="ocaml-source">[|</span><span class="ocaml-source"> </span><span class="ocaml-source">attr</span><span class="ocaml-source"> </span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-string-quoted">onclick</span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-source"> </span><span class="ocaml-source">(</span><span class="ocaml-constant-language">Jv</span><span class="ocaml-keyword">.</span><span class="ocaml-source">repr</span><span class="ocaml-source"> </span><span class="ocaml-source">(</span><span class="ocaml-keyword">fun</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">()</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">-&gt;</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">Todo</span><span class="ocaml-keyword">.</span><span class="ocaml-source">toggle</span><span class="ocaml-source"> </span><span class="ocaml-source">t</span><span class="ocaml-source">)</span><span class="ocaml-source">)</span><span class="ocaml-source"> </span><span class="ocaml-source">|]</span><span class="ocaml-source">)</span><span class="ocaml-source">
</span><span class="ocaml-source">    </span><span class="ocaml-keyword">in</span><span class="ocaml-source">
</span><span class="ocaml-source">    </span><span class="ocaml-constant-language">M</span><span class="ocaml-keyword">.</span><span class="ocaml-source">v</span><span class="ocaml-source">
</span><span class="ocaml-source">      </span><span class="ocaml-source">(</span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-string-quoted">div.todo</span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">^</span><span class="ocaml-source"> </span><span class="ocaml-source">choose</span><span class="ocaml-source"> </span><span class="ocaml-source">t</span><span class="ocaml-keyword">.</span><span class="ocaml-source">completed</span><span class="ocaml-source"> </span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-string-quoted">.completed</span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-source"> </span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-source">)</span><span class="ocaml-source">
</span><span class="ocaml-source">      ~</span><span class="ocaml-source">children</span><span class="ocaml-keyword">:</span><span class="ocaml-source">
</span><span class="ocaml-source">        </span><span class="ocaml-source">(</span><span class="ocaml-constant-language">`Vnodes</span><span class="ocaml-source">
</span><span class="ocaml-source">          </span><span class="ocaml-source">[</span><span class="ocaml-source">
</span><span class="ocaml-source">            </span><span class="ocaml-constant-language">M</span><span class="ocaml-keyword">.</span><span class="ocaml-source">v</span><span class="ocaml-source"> </span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-string-quoted">p</span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-source"> ~</span><span class="ocaml-source">children</span><span class="ocaml-keyword">:</span><span class="ocaml-source">(</span><span class="ocaml-constant-language">`String</span><span class="ocaml-source"> </span><span class="ocaml-source">t</span><span class="ocaml-keyword">.</span><span class="ocaml-source">text</span><span class="ocaml-source">)</span><span class="ocaml-keyword">;</span><span class="ocaml-source">
</span><span class="ocaml-source">            </span><span class="ocaml-constant-language">M</span><span class="ocaml-keyword">.</span><span class="ocaml-source">v</span><span class="ocaml-source"> </span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-string-quoted">p</span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-source"> ~</span><span class="ocaml-source">children</span><span class="ocaml-keyword">:</span><span class="ocaml-source">(</span><span class="ocaml-constant-language">`String</span><span class="ocaml-source"> </span><span class="ocaml-source">t</span><span class="ocaml-keyword">.</span><span class="ocaml-source">created</span><span class="ocaml-source">)</span><span class="ocaml-keyword">;</span><span class="ocaml-source">
</span><span class="ocaml-source">            </span><span class="ocaml-constant-language">M</span><span class="ocaml-keyword">.</span><span class="ocaml-source">v</span><span class="ocaml-source"> </span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-string-quoted">button.remove</span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-source"> ~</span><span class="ocaml-source">attr</span><span class="ocaml-keyword">:</span><span class="ocaml-source">remove</span><span class="ocaml-source"> ~</span><span class="ocaml-source">children</span><span class="ocaml-keyword">:</span><span class="ocaml-source">(</span><span class="ocaml-constant-language">`String</span><span class="ocaml-source"> </span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-string-quoted">Remove</span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-source">)</span><span class="ocaml-keyword">;</span><span class="ocaml-source">
</span><span class="ocaml-source">            </span><span class="ocaml-constant-language">M</span><span class="ocaml-keyword">.</span><span class="ocaml-source">v</span><span class="ocaml-source"> </span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-string-quoted">button.complete</span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-source"> ~</span><span class="ocaml-source">attr</span><span class="ocaml-keyword">:</span><span class="ocaml-source">toggle</span><span class="ocaml-source">
</span><span class="ocaml-source">              ~</span><span class="ocaml-source">children</span><span class="ocaml-keyword">:</span><span class="ocaml-source">(</span><span class="ocaml-constant-language">`String</span><span class="ocaml-source"> </span><span class="ocaml-source">(</span><span class="ocaml-source">choose</span><span class="ocaml-source"> </span><span class="ocaml-source">t</span><span class="ocaml-keyword">.</span><span class="ocaml-source">completed</span><span class="ocaml-source"> </span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-string-quoted">Uncomplete</span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-source"> </span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-string-quoted">Complete</span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-source">)</span><span class="ocaml-source">)</span><span class="ocaml-keyword">;</span><span class="ocaml-source">
</span><span class="ocaml-source">          </span><span class="ocaml-source">]</span><span class="ocaml-source">)</span><span class="ocaml-source">
</span><span class="ocaml-source">  </span><span class="ocaml-keyword">in</span><span class="ocaml-source">
</span><span class="ocaml-source">  </span><span class="ocaml-source">let </span><span class="ocaml-entity-name">input</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">=</span><span class="ocaml-source">
</span><span class="ocaml-source">    </span><span class="ocaml-constant-language">M</span><span class="ocaml-keyword">.</span><span class="ocaml-source">(</span><span class="ocaml-source">
</span><span class="ocaml-source">      </span><span class="ocaml-source">v</span><span class="ocaml-source"> ~</span><span class="ocaml-source">attr</span><span class="ocaml-keyword">:</span><span class="ocaml-source">key</span><span class="ocaml-source"> </span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-string-quoted">input#new-todo[placeholder='What's to be done?'][autofocus]</span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-source">)</span><span class="ocaml-source">
</span><span class="ocaml-source">  </span><span class="ocaml-keyword">in</span><span class="ocaml-source">
</span><span class="ocaml-source">  </span><span class="ocaml-source">let </span><span class="ocaml-entity-name">view</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">_</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">=</span><span class="ocaml-source">
</span><span class="ocaml-source">    </span><span class="ocaml-constant-language">M</span><span class="ocaml-keyword">.</span><span class="ocaml-source">(</span><span class="ocaml-source">
</span><span class="ocaml-source">      </span><span class="ocaml-source">v</span><span class="ocaml-source"> </span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-string-quoted">div.main</span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-source">
</span><span class="ocaml-source">        ~</span><span class="ocaml-source">children</span><span class="ocaml-keyword">:</span><span class="ocaml-source">
</span><span class="ocaml-source">          </span><span class="ocaml-source">(</span><span class="ocaml-constant-language">`Vnodes</span><span class="ocaml-source">
</span><span class="ocaml-source">            </span><span class="ocaml-source">[</span><span class="ocaml-source">
</span><span class="ocaml-source">              </span><span class="ocaml-source">v</span><span class="ocaml-source"> </span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-string-quoted">h1</span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-source"> ~</span><span class="ocaml-source">children</span><span class="ocaml-keyword">:</span><span class="ocaml-source">(</span><span class="ocaml-constant-language">`String</span><span class="ocaml-source"> </span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-string-quoted">Todo Stack</span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-source">)</span><span class="ocaml-keyword">;</span><span class="ocaml-source">
</span><span class="ocaml-source">              </span><span class="ocaml-source">input</span><span class="ocaml-keyword">;</span><span class="ocaml-source">
</span><span class="ocaml-source">              </span><span class="ocaml-source">v</span><span class="ocaml-source"> </span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-string-quoted">div.todo-list</span><span class="ocaml-string-quoted">&quot;</span><span class="ocaml-source"> ~</span><span class="ocaml-source">children</span><span class="ocaml-keyword">:</span><span class="ocaml-source">(</span><span class="ocaml-constant-language">`Vnodes</span><span class="ocaml-source"> </span><span class="ocaml-source">(</span><span class="ocaml-constant-language">List</span><span class="ocaml-keyword">.</span><span class="ocaml-source">map</span><span class="ocaml-source"> </span><span class="ocaml-source">todo</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">!</span><span class="ocaml-source">todos</span><span class="ocaml-source">)</span><span class="ocaml-source">)</span><span class="ocaml-keyword">;</span><span class="ocaml-source">
</span><span class="ocaml-source">            </span><span class="ocaml-source">]</span><span class="ocaml-source">)</span><span class="ocaml-source">)</span><span class="ocaml-source">
</span><span class="ocaml-source">  </span><span class="ocaml-keyword">in</span><span class="ocaml-source">
</span><span class="ocaml-source">  </span><span class="ocaml-constant-language">Component</span><span class="ocaml-keyword">.</span><span class="ocaml-source">v</span><span class="ocaml-source"> </span><span class="ocaml-source">view</span><span class="ocaml-source">
</span><span class="ocaml-source">
</span><span class="ocaml-keyword">let</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">()</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">=</span><span class="ocaml-source">
</span><span class="ocaml-source">  </span><span class="ocaml-source">let </span><span class="ocaml-entity-name">body</span><span class="ocaml-source"> </span><span class="ocaml-keyword-operator">=</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">Brr</span><span class="ocaml-keyword">.</span><span class="ocaml-source">(</span><span class="ocaml-constant-language">Document</span><span class="ocaml-keyword">.</span><span class="ocaml-source">body</span><span class="ocaml-source"> </span><span class="ocaml-constant-language">G</span><span class="ocaml-keyword">.</span><span class="ocaml-source">document</span><span class="ocaml-source">)</span><span class="ocaml-source"> </span><span class="ocaml-keyword">in</span><span class="ocaml-source">
</span><span class="ocaml-source">  </span><span class="ocaml-constant-language">M</span><span class="ocaml-keyword">.</span><span class="ocaml-source">(</span><span class="ocaml-source">mount</span><span class="ocaml-source"> </span><span class="ocaml-source">body</span><span class="ocaml-source"> </span><span class="ocaml-source">todos</span><span class="ocaml-source">)</span><span class="ocaml-source">
</span></code></pre><p>A nice extension would be to try and add <code>Brr</code>'s bindings to the <em>Local Storage</em> API to persist the state of the app.</p>

   <ol></ol>
  </div>
            
            
          
 </body>
</html>